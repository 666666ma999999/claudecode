# スキルシステム運用ルール

## 自動認識
- スキルは `~/.claude/skills/` に配置すれば自動認識される
- CLAUDE.mdへのスキル参照追加は**不要**

## スキル作成時の禁止事項
- CLAUDE.mdにスキルのトリガーや説明を追加しない
- スキルの内容をCLAUDE.mdに複製しない

## スキル配置場所
```
~/.claude/skills/<スキル名>/
├── SKILL.md          # 必須：name, descriptionで自動発動
├── scripts/          # 任意：実行スクリプト
├── references/       # 任意：参照ドキュメント
└── assets/           # 任意：テンプレート等
```

## スキル改善ルール
- スキル使用後、新しいパターンやエラー対処法が見つかった場合、該当スキルのSKILL.mdまたはreferencesに追記すること
- ユーザーへの確認なしで自動実行

## 修正完了後の自動振り返り（必須）

**スキル修正・機能追加・エラー解決後、以下を自動で判断・実行すること:**

### 1. 汎用知見の横展開チェック

```
確認項目:
- このパターンは他のシステム/サイトでも使えるか？
- 同様のエラーが他のスキルでも発生しうるか？
- 共通のトラブルシューティングとして追加すべきか？
```

**該当する場合**: 関連スキルにも追記（ユーザー確認不要）

### 2. スキル構成の最適化判断

| 状況 | 判断 |
|------|------|
| 特定システム専用の知見 | 既存スキルに追加 |
| 複数システムで共通の知見 | 汎用スキル作成を検討 |
| 既存の汎用スキルに該当 | そのスキルに追加 |

### 3. 自動実行の範囲

以下は**ユーザー確認なしで自動実行**:
- 既存スキルへの知見追記
- トラブルシューティングの追加
- セレクタ・URL等の更新

以下は**ユーザーに確認**:
- 新規スキルの作成
- スキルの統合・削除
- 大規模な構造変更

## スキル作成時の重複チェック（必須）

**新規スキル作成前に必ず以下を実行すること:**

```bash
ls ~/.claude/skills/
ls ~/.claude/skills/ | grep -i <キーワード>
grep -r "<機能キーワード>" ~/.claude/skills/*/SKILL.md
```

### 重複発見時の対応

| 状況 | 対応 |
|------|------|
| 完全重複 | 新規作成せず既存スキルを使用 |
| 部分重複 | 既存スキルに機能追加 |
| 類似機能で別目的 | 既存スキルからの参照を検討 |

### 命名規則

- **STEPシリーズ**: `step{番号}-{機能名}` 形式で統一
- **汎用スキル**: 機能を表す名前（kebab-case）

### 禁止事項

- 同じ機能に異なる名前のスキルを作成しない
- 既存スキルの存在を確認せずに新規作成しない
