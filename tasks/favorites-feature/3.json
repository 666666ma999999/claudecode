{
  "id": "3",
  "subject": "T10-T12: Frontend - comparison view, routing, index.html",
  "description": "Phase 3: 比較ビュー\n\n### T11: comparison-view.js - 新規作成\n```js\nasync function renderCompare(container) {\n    const { params } = getRoute();\n    const idsStr = params[0] || '';\n    const ids = idsStr.split(',').map(Number).filter(n => n > 0);\n    \n    if (ids.length < 2) {\n        container.innerHTML = '<div class=\"error-state\"><h3>比較する画像を2枚以上選択してください</h3><button class=\"btn btn-primary\" onclick=\"navigate(\\'#gallery\\')\">ギャラリーに戻る</button></div>';\n        return;\n    }\n    \n    container.innerHTML = '<div class=\"loading-state\">読み込み中...</div>';\n    \n    try {\n        const images = await Promise.all(ids.map(id => apiRequest(`${CONFIG.ENDPOINTS.IMAGES}/${id}`)));\n        \n        container.innerHTML = `\n            <div style=\"margin-bottom:12px;display:flex;align-items:center;gap:12px\">\n                <button class=\"btn btn-secondary\" onclick=\"navigate('#gallery')\">← ギャラリーに戻る</button>\n                <h2 class=\"section-title\" style=\"margin:0\">画像比較 (${images.length}枚)</h2>\n            </div>\n            <div class=\"compare-grid\">\n                ${images.map(img => `\n                    <div class=\"compare-card\">\n                        <img src=\"${CONFIG.ENDPOINTS.IMAGE_FILE(img.id)}\" alt=\"Compare image\" loading=\"lazy\">\n                        <div class=\"compare-card-info\">\n                            <div class=\"image-card-model\">${img.model || 'unknown'}</div>\n                            <div style=\"font-size:12px;margin-top:4px\">${escapeHtml((img.prompt_text || '').slice(0, 100))}</div>\n                            ${img.avg_score > 0 ? `<div class=\"image-card-score\"><span class=\"score-badge ${getScoreClass(img.avg_score)}\">${Math.round(img.avg_score*10)/10}</span></div>` : ''}\n                            <div style=\"font-size:11px;color:var(--text-secondary);margin-top:4px\">${img.width}x${img.height} | ${img.aspect_ratio || '-'}</div>\n                            <div style=\"margin-top:8px\">\n                                <button class=\"btn btn-secondary btn-sm\" onclick=\"navigate('#detail/${img.id}')\">詳細</button>\n                            </div>\n                        </div>\n                    </div>\n                `).join('')}\n            </div>\n        `;\n    } catch (err) {\n        container.innerHTML = '<div class=\"error-state\">画像の読み込みに失敗しました: ' + escapeHtml(err.message) + '</div>';\n    }\n}\n```\n\n### T12: app.js - compareルート追加\nhandleRoute()のswitch内に追加:\n```js\ncase 'compare':\n    await renderCompare(content);\n    break;\n```\n\n### T12: index.html - scriptタグ追加\nstyle-report.jsの前に:\n```html\n<script src=\"/static/components/comparison-view.js?v=20260219\"></script>\n```\n\n### ファイルパス（絶対パス）\n- /Users/masaaki_nagasawa/Desktop/prm/aiimg/frontend/components/comparison-view.js（新規）\n- /Users/masaaki_nagasawa/Desktop/prm/aiimg/frontend/app.js\n- /Users/masaaki_nagasawa/Desktop/prm/aiimg/frontend/index.html",
  "activeForm": "Implementing comparison view",
  "status": "pending",
  "blocks": [],
  "blockedBy": [
    "2"
  ],
  "owner": "frontend-dev"
}