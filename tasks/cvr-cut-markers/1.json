{
  "id": "1",
  "subject": "P1: SubtitleInfo拡張 + app-config visibility_rules追加",
  "description": "## 変更内容\n\n### 1. registration_session.py:60-67 SubtitleInfo拡張\n`backend/routers/registration_session.py`のSubtitleInfoクラスに1フィールド追加:\n```python\nnarrative_role: Optional[str] = Field(default=None, description=\"物語役割 (hook/build/pivot/reveal/climax)\")\n```\n既存フィールド`regenerated_text`の直後に追加。\n\n### 2. app-config.json visibility_rules追加\n`frontend/data/app-config.json`の末尾（`}`の前）に`visibility_rules`セクションを追加:\n```json\n\"visibility_rules\": {\n    \"version\": \"1.0\",\n    \"fallback_formula\": {\n        \"a\": 58, \"b\": 15,\n        \"comment\": \"base = round(a - b * ln(N)), used only when AI placement fails\"\n    },\n    \"role_multiplier\": {\n        \"hook\": 0.8, \"build\": 1.0, \"pivot\": 1.3, \"reveal\": 1.5, \"climax\": 0.9\n    },\n    \"safety_guards\": {\n        \"single_subtitle_chars\": 30,\n        \"min_chars\": 10,\n        \"max_ratio\": 0.4\n    }\n}\n```\n\n**重要**: プラン外の変更は一切禁止。上記2点のみ実装すること。",
  "activeForm": "SubtitleInfo拡張とconfig追加を実装中",
  "status": "pending",
  "blocks": [],
  "blockedBy": []
}